---
title: DMA外挂真的无解吗？
url: https://www.zhihu.com/question/658012196/answer/1938568124485047764
author: 享彦
author_badge: 不止为活着而活着
created: 2025-08-12 11:50
modified: 2025-08-12 11:50
upvote_num: 609
comment_num: 280
---
藤子+微软通过VT-d直接就给dma干末日了
现在各类板子都没办法了。  

没有VT-d和iommu，DMA访问内存就只接受物理地址，CPU要把一个地址告诉设备，也只能告诉物理地址。而开了vtd这个问题就迎刃而解了，在dma访问内存的时候，系统返回给设备驱动的不再是物理地址，而是虚拟地址（IOVA），设备访问内存时，会由iommu来将这个虚拟地址转换成物理地址。

而这个iommu就是个硬件单元，放在SOC内部（iommu在北桥中，现在北桥一般被装进SOC里了）。在SOC上可能有一个也可能有多个iommu硬件单元，而每个单元负责管理挂载到它所在的PCIe Root Port下所有设备的DMA请求。BIOS会将身上的iommu信息通过ACPI协议报告给操作系统，再由操作系统来初始化和管理这些硬件设备。

简单一点理解就是vtd把pcie等各种硬件设备（不管正不正常）都虚拟化了。反作弊系统只要有权限和微软合作vtd技术+硬件厂家支持（intel/amd），就可以直接通过这个技术看到并管理所有设备，并且分配各个设备读写内存的权限，跨域读写就会被记录等。也就是说只要是通过pcie上的硬件设备试图访问内存数据，就一定会在电脑系统中留下痕迹，尤其是反作弊加密了的内存数据（如敌方位置坐标等）是可以直接禁止任何dma访问的，你伪装再好，哪怕真有个硬盘/声卡在上面（现在比较火的h2），检测到你访问了这些数据马上就t你。  

所以，在其他条件都ok的情况下，其实只是插着板子反作弊系统并不会t你，因为你这个“奇怪”的设备并没有读取什么内存数据。但是你如果在副机上运行某些软件要求通过这个“奇怪”的设备读取一些“奇怪”的数据，那你马上就会被t然后等待强检，即使查不到你设备的问题，但也会大大增加你的时间成本，并且在特征被攻破后直接10年。根本解决办法还是要让读取不被记录，那这就是软件层面的对抗了，因为这个一直都是内存挂的命题。

打个比方吧，以前dma或者h1、h2就是三维世界的产物，反作弊系统作为二维产物根本看不到这些高维度的东西。它只能感觉这个玩家很怪。而vtd就是把这些板子全部降维成二维的，把他们的读写拉回到系统内与反作弊进行二维（代码）层面的对抗。这就跟反作弊打了一辈子的内存挂一样了，都是软件代码层面对抗，你觉得写dma作弊软件挣外快的干的过藤子的码农吗？详见fo投降记。

还有那些什么改针脚、魔改bios、u盘过vtd这些都是试图骗系统证明自己开了vtd实际没开，或者修改表达到绕开vtd的目的，但还是没有根本解决这个问题，被反作弊攻破检测也是时间问题。