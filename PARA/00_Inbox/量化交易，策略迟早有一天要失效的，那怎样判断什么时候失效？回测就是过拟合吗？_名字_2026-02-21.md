---
title: 量化交易，策略迟早有一天要失效的，那怎样判断什么时候失效？回测就是过拟合吗？
url: https://www.zhihu.com/question/596078070/answer/2008529426548290205
author: 名字
author_badge: 写作如在街头赤裸奔跑，需要毫不犹豫地展现真实。
created: 2026-02-21 13:12
modified: 2026-02-21 13:12
upvote_num: 228
comment_num: 28
---
1714年，英国国会悬赏两万英镑，给任何能在海上测定经度的人。




两万英镑。那时候一个水手一年挣十四英镑。




问题不复杂。纬度早就能测了。你量一下正午太阳的高度角，查个表，就知道自己在赤道以北多少度。古希腊人就会。但经度不行。经度没有自然参照物。地球自转，东和西是它转出来的。你站在海上，四面都是水，你不知道自己离格林尼治有多远。




有人提出看木星的卫星。有人提出在海上放炮，让远处的船听响。有人提出养一群受了伤的狗，因为当时有种药粉叫"感应粉"，据说撒在岸上的绷带上，海上那条狗就会同时惨叫。你听到狗叫了，就知道岸上是几点。




没一个靠谱的。




靠谱的那个方案来自一个木匠。约翰·哈里森。他没上过大学。他用了四十年做了一块钟。





---


经度的本质是时间。




地球二十四小时转一圈。三百六十度。每小时十五度。你在船上看太阳到了正午，同时看一眼钟。钟上显示的是格林尼治的时间，比方说下午三点。三个小时的时差，乘以十五，四十五度。你在格林尼治以西四十五度。




就这么简单。




条件只有一个：钟必须准。




大海上的钟不容易准。船在晃。温度在变。湿度在变。金属在热胀冷缩。润滑油在变稠变稀。一天差一秒，六周以后你不知道自己在大西洋的哪片水域。差十秒，你撞礁石。




1707年，英国海军上将肖维尔率四艘军舰从直布罗陀返航。他不知道自己往西偏了多远。四艘船全撞上了锡利群岛的礁石。两千人死了。




两千人。因为没有一块准的钟。





---


我认识一个人叫方远。在上海做量化。2018年入行，做的是统计套利。




统计套利的逻辑很简单。你找两只相关性很高的股票，A和B。正常情况下它们的价差围绕一个均值波动。价差大了你做空贵的做多便宜的，价差回来你就赚了。




方远说：这个策略的命根子不是模型。是时间戳。




我说：什么意思。




他说：你看到A的报价是在10:03:42.331，你看到B的报价是在10:03:42.337。差了六毫秒。你要拿这两个报价算价差，你得确认它们是"同一时刻"的。六毫秒够不够算同一时刻。




他说：在慢的市场里够了。在快的市场里不够。六毫秒里价格可以跳三次。你以为你在套利，其实你在跟一个六毫秒之前的影子做交易。




我说：那怎么办。




他说：把钟调准。你的交易系统的时钟、交易所的时钟、网络传输的延迟，全部校准。误差不能超过一毫秒。最好一百微秒以内。




他抽了一口烟。




他说：你知道我们花了多少钱买钟吗。不是买策略。不是买数据。是买钟。一台铷原子钟，三十万人民币。放在机房里。只干一件事：告诉系统现在是几点。




我说：三十万买一块钟。




他说：便宜的。有人买铯原子钟。两百万。军用级的。铷钟一天漂移一微秒。铯钟一天零点零一微秒。




他把烟灰弹掉。




他说：你觉得零点九九微秒的差距不值一百七十万。我告诉你，那零点九九微秒里面，藏着一年三千万的利润。





---


哈里森花了四十年做钟。




第一台叫H1。七十二磅重。黄铜齿轮，木框架，用的是他自己发明的"蚱蜢擒纵器"。不需要润滑油。因为哈里森知道，油会变。油在冬天变稠，夏天变稀，海上被盐雾腐蚀。油是钟的敌人。




他把油从钟里赶走了。




H1上了船。经度委员会说不够准。哈里森做了H2。还是不够准。做了H3。花了十七年。一千多个零件。六百多处改动。还是不够准。




然后他做了一件所有人没想到的事。他把前三台钟的思路全扔了。




他做了一块怀表。




H4。直径十三厘米。一点四五公斤。快速摆轮，每秒振动五次。温度补偿用双金属条。没有一滴油。




一七六一年，H4跟着军舰从朴茨茅斯到牙买加。八十一天。到了以后测经度，误差五秒。




五秒。八十一天。不到两公里。




两千人死在礁石上的那个问题，被一个木匠和一块没有油的怀表解决了。




经度委员会还是不想给钱。他们宁愿相信天文学家。皇家天文学家马斯基林搞了一套月距法，用月亮和星星算经度，要四个小时。马斯基林说这才是科学。钟只是手艺活。




哈里森八十岁去求国王。议会才拨了八千七百五十英镑。不到两万。




木匠死的时候八十三岁。钟赢了。月距法输了。不是因为钟更优雅。是因为水手要的不是优雅。水手要的是不撞礁石。





---


方远跟我讲过他2020年亏钱的事。




2020年三月。新冠。全球股市崩盘。他的统计套利策略在一周里亏了两千四百万。




他说：不是策略错了。是钟停了。




我说：什么意思。




他说：我的策略假设两只股票的价差是均值回归的。十年的数据。均值在那里，标准差在那里，协整检验的p值小于0.01。教科书级别的配对。




他说：三月九号，价差炸了。不是偏离两个标准差。是八个。概率是十的负十五次方。




他说：但它发生了。




他说：止损线在三个标准差。越过的时候系统自动平仓。但流动性消失了。买盘全没了。卖单成交不了。一直滑点。最后平出来的价格比止损线差了百分之四。那百分之四就是两千四百万。




他灭了烟。




他说：我花了三年想明白一件事。我的钟坏了。不是物理的钟。是模型里的钟。




他说：统计套利的钟就是均值。你所有的交易都是相对于那个均值做的。均值是你的格林尼治。2020年三月，均值消失了。不是漂移了。是消失了。过去十年的均衡关系在三天之内瓦解。我的钟指着的格林尼治不存在了。但我还在拿那块钟测经度。




他看着窗外。




他说：两千人死在礁石上，因为没有准的钟。我亏了两千四百万，因为钟指的那个地方不存在了。





---


我问方远：你后来怎么做的。




他说：换钟。




他说：固定窗口换成了regime-switching model。马尔可夫状态切换。让模型自己判断当前处于哪种状态。高波动和低波动，均值不一样，方差不一样，转换概率也不一样。不是一块钟。是两块钟。模型自己决定看哪块。




我说：有用吗。




他说：有用。但第二个改动更重要。我给钟加了一个"不可用"状态。




我说：什么意思。




他说：以前系统里没有"不知道"这个选项。要么做多，要么做空，要么不做。但"不做"是因为价差在均值附近，不是因为钟坏了。现在当两个regime之间的切换概率超过阈值，系统判定"钟不可用"。不是说价差高了低了。是说我不知道价差应该是多少。因为我不知道现在是几点。




他说：这个状态触发的时候，所有仓位平掉。不是止损。是承认无知。




他看着我。




他说：哈里森那块钟，齿轮卡住了，指针不走了，水手一看就知道钟坏了。不会跟着一块死钟导航。但我的模型坏的时候不停。它继续输出。继续给你均值，继续给你信号。你不知道它坏了。你跟着它走，走到礁石上。




他说：最可怕的钟不是不走的钟。是走着、但不准的钟。





---


2008年，中本聪要解决一个问题。让一群互不信任的人就一件事达成共识：这笔钱是谁的，什么时候从A转到了B。




这就是经度问题。




一千台电脑散布在全世界。每台电脑的时钟不一样。你怎么让它们同意一个交易的顺序。




Leslie Lamport在1978年就写过这件事。分布式系统里没有全局的"现在"。每台机器活在自己的时间里。你看到的先后顺序取决于你站在哪台机器上看。他发明了逻辑时钟：不测"几点了"，测"谁在谁之前"。因果关系。因果不需要钟。




但逻辑时钟只给偏序。金融要全序。你不能说两笔交易是"并发的"。A同时给B和C各转一百块，但只有一百块。你必须决定哪笔先生效。




中本聪的办法是把时间变成代价。




你要盖一个时间戳，得算一道题。SHA-256。暴力搜索一个nonce，让区块头的哈希值小于目标值。平均十分钟出一个块。这十分钟不是用钟量出来的。是用电量出来的。




时间不再是钟面上的指针。时间是你烧掉了多少能量。




哈里森用机械精度把时间锁在怀表里。中本聪用热力学把时间锁在哈希里。原理一样：你需要一个不能被篡改的时间基准。哈里森的基准是摆轮的等时性。中本聪的基准是SHA-256的单向性。你可以验证答案，但没有捷径。




当全网51%的算力被一个人控制，他可以重写历史。把已经确认的交易抹掉。六个确认、十个确认都没用。他从十个块之前重新算，把那十个块全换成他的版本。




钟被换了。上面显示的时间是他要你看到的时间。你以为你知道自己在哪。你不知道。





---


方远有一次喝多了跟我说了一件事。




他说他2020年亏了两千四百万之后，回家跟老婆说了。老婆做财务的。听完没说话。过了五分钟问了一句：你辞职吗。




他说：不辞。




老婆说：那就接着做。




然后去厨房做饭了。




他说他坐在沙发上想了很久。想的是：这句话发生在什么时候。




不是几点几分。是在他们的关系里，这句话的坐标在哪。结婚九年。他亏过几次钱。每次他老婆的反应不一样。第一次她哭了。第二次骂了他。第三次沉默。第四次问：你辞职吗。




如果你只看第四次，你不知道这句话是什么意思。可能是绝望，也可能是信任。你需要前面三次才能校准。




前面三次是钟。




他说：她不是在问我辞不辞。她在确认我的钟还在走。




他说：她见过我第一次亏钱。慌的。跟她讲了三个小时。第二次不讲了，在家里转来转去。第三次安静了，不吃饭。第四次回来说了一句"亏了两千四百万"，坐下来。




他说：每一次反应比上一次少。她在看这条曲线。我还在这条曲线上，她就知道钟还在走。钟还在走，人就没事。




他说：如果第四次我回来哭了，像第一次一样，她就知道钟坏了。三十七岁的男人在第四次亏钱的时候回到第一次的反应，这不叫情绪释放。这叫退行。




他喝了一口酒。




他说：她问"你辞职吗"不是问辞不辞。是在量经度。





---


方远最后跟我说的一件事。




他说2023年底做了一个新策略。不是统计套利了。波动率。VIX、方差互换、vol surface。




他说了一句我听懂的话。




他说：我以前的策略在回答"现在是几点"。新的策略回答另一个问题：钟本身在加速还是在减速。




他说：波动率就是时间的流速。VIX高的时候时间在加速。相关性在破裂，价差在膨胀，所有事情都发生得更快。VIX低的时候时间在减速。什么都不动。




他说：我现在不做价差了。我做钟的速度。




我说：那你怎么知道你的钟是对的。你拿什么校准。




他说：没有。没有办法校准。你测量钟的速度，用的还是钟。你拿一块钟校另一块钟，但谁来校那块用来校准的钟。一直退下去，退到底，没有绝对的基准。




他说：哈里森校钟用星星。中本聪校钟用算力。GPS校钟用原子跃迁。我校钟用历史波动率。但星星会动。算力会集中。原子钟也有误差。历史波动率是过去的。




他说：所有的钟都在漂移。




他看着窗外。上海的夜景。灯很多。




他说：所以你只能做一件事。




我说：什么。




他说：知道自己的钟在漂移。




停了一下。




他说：然后继续用它。